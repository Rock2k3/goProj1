# Типы сценариев и таблицы activity-событий

## Легенда обязательности событий
|Значение| Комментарий                                                                                                                                                    |
|:--|:---------------------------------------------------------------------------------------------------------------------------------------------------------------|
|:heavy_check_mark:ОБЯЗАТЕЛЬНО| Cобытие должно быть опубликовано для каждого экземпляра сценария. Без него сценарий не является корректным.                                                    |
|:warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ| Cобытие может отсутствовать для некоторых (или всех) экземпляров сценария данного типа, но сценарий должен поддерживать логику связанную с этими событиями.    |
|:ballot_box_with_check:ОПЦИОНАЛЬНО| Cобытие создается исключительно в соответствии с внутренней логикой сценария.                                                                                  |
|:x: НЕ ПУБЛИКУЕТСЯ| Cобытие не должно публиковаться сценарием данного типа.                                                                                                        |

### 1. Автономный сценарий
Этот сценарий не допускает подключение к нему дочерних сценариев, а так же не участвует в activity-логике других сценариев.

#### Условия
| Поле                        | Значения                            |
|:----------------------------|:------------------------------------|
| children_scenario_allowed   | **false**                           |
| В триггерах **нет** события | source_activity_type: ACTIVITY_INIT |
|                             | source_scenario_state: INITIATED    |

#### Таблица событий
| Статус сценария                          |Тип activity-события| Обязательность                   | Комментарий                                                                                                                                                                                                             |
|:-----------------------------------------|:----|:---------------------------------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| IS_ROLLING_BACK                          |ACTIVITY_IN_ACTION| :x: НЕ ПУБЛИКУЕТСЯ   |                                                                                                                                                                                                                         |
| HAS_ROLLED_BACK                          |ACTIVITY_STATE| :x: НЕ ПУБЛИКУЕТСЯ   |                                                                                                                                                                                                                         |
| INITIATED                                |ACTIVITY_INIT| :x: НЕ ПУБЛИКУЕТСЯ    |                                                                                                                                                                                                                         |
| ACCEPTED                                 |ACTIVITY_IN_ACTION| :x: НЕ ПУБЛИКУЕТСЯ    |                                                                                                                                                                                                                         |
| SKIPPED                                  |ACTIVITY_IN_ACTION| :x: НЕ ПУБЛИКУЕТСЯ   |                                                                                                                                                                                                                         |
| STARTED                                  |ACTIVITY_IN_ACTION| :heavy_check_mark:ОБЯЗАТЕЛЬНО    |                                                                                                                                                                                                                         |
| RUNNING                                  |ACTIVITY_STATE| :heavy_check_mark:ОБЯЗАТЕЛЬНО    |                                                                                                                                                                                                                         |
| CANCELLED                                |ACTIVITY_STATE| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ   | У сценария обязательно должно быть одно из событий ACTIVITY_RESULT.POSITIVE_ENDING, ACTIVITY_RESULT.NEUTRAL_ENDING, ACTIVITY_RESULT.NEGATIVE_ENDING или ACTIVITY_ERRORS.FAULT или ACTIVITY_STATE.CANCELLED              |
| DATA_WAITING                             |ACTIVITY_STATE| :ballot_box_with_check:ОПЦИОНАЛЬНО|                                                                                                                                                                                                                         |
| EVENT_WAITING                            |ACTIVITY_STATE| :x: НЕ ПУБЛИКУЕТСЯ   |                                                                                                                                                                                                                         |
| HOLD                                     |ACTIVITY_STATE| :ballot_box_with_check:ОПЦИОНАЛЬНО|                                                                                                                                                                                                                         |
| PAUSED                                   |ACTIVITY_STATE| :ballot_box_with_check:ОПЦИОНАЛЬНО|                                                                                                                                                                                                                         |
| POSITIVE_ENDING                          |ACTIVITY_RESULT| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ   | У сценария обязательно должно быть одно из событий ACTIVITY_RESULT.POSITIVE_ENDING, ACTIVITY_RESULT.NEUTRAL_ENDING, ACTIVITY_RESULT.NEGATIVE_ENDING или ACTIVITY_ERRORS.FAULT или ACTIVITY_STATE.CANCELLED              |
| NEUTRAL_ENDING                           |ACTIVITY_RESULT| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ   | У сценария обязательно должно быть одно из событий ACTIVITY_RESULT.POSITIVE_ENDING, ACTIVITY_RESULT.NEUTRAL_ENDING, ACTIVITY_RESULT.NEGATIVE_ENDING или ACTIVITY_ERRORS.FAULT или ACTIVITY_STATE.CANCELLED              |
| NEGATIVE_ENDING                          |ACTIVITY_RESULT| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ   | У сценария обязательно должно быть одно из событий ACTIVITY_RESULT.POSITIVE_ENDING, ACTIVITY_RESULT.NEUTRAL_ENDING, ACTIVITY_RESULT.NEGATIVE_ENDING или ACTIVITY_ERRORS.FAULT или ACTIVITY_STATE.CANCELLED              |
| FAULT                                    |ACTIVITY_ERRORS| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ   | У сценария обязательно должно быть одно из событий ACTIVITY_RESULT.POSITIVE_ENDING, ACTIVITY_RESULT.NEUTRAL_ENDING, ACTIVITY_RESULT.NEGATIVE_ENDING или ACTIVITY_ERRORS.FAULT или ACTIVITY_STATE.CANCELLED              |
| RUNNING ... HOLD	                        |ACTIVITY_ERRORS| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ   |                                                                                                                                                                                                                         |
| RUNNING ... HOLD body.service.slaState{} |ACTIVITY_STATE_SLA| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ    |                                                                                                                                                                                                                         |
| MALFUNCTION |ACTIVITY_EXECUTE_SCENARIO_FAILED| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ    |                                                                                                                                                                                                                         |


### 2. Родительский сценарий
Данный сценарий позволяет подключаться к нему другим дочерним сценариям, но не участвует в activity-логике других сценариев.

#### Условия
| Поле                        | Значения                            |
|:----------------------------|:------------------------------------|
| children_scenario_allowed   | **true**                            |
| В триггерах **нет** события | source_activity_type: ACTIVITY_INIT |
|                             | source_scenario_state: INITIATED    |

#### Таблица событий
| Статус сценария                          |Тип activity-события| Обязательность                      | Комментарий                                                                                                                                                                                                             |
|:-----------------------------------------|:----|:------------------------------------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| IS_ROLLING_BACK                          |ACTIVITY_IN_ACTION| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ      |                                                                                                                                                                                                                         |
| HAS_ROLLED_BACK                          |ACTIVITY_STATE| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ      |                                                                                                                                                                                                                         |
| INITIATED                                |ACTIVITY_INIT| :heavy_check_mark:ОБЯЗАТЕЛЬНО       |                                                                                                                                                                                                                         |
| ACCEPTED                                 |ACTIVITY_IN_ACTION| :x: НЕ ПУБЛИКУЕТСЯ                  |                                                                                                                                                                                                                         |
| SKIPPED                                  |ACTIVITY_IN_ACTION| :x: НЕ ПУБЛИКУЕТСЯ                  |                                                                                                                                                                                                                         |
| STARTED                                  |ACTIVITY_IN_ACTION| :heavy_check_mark:ОБЯЗАТЕЛЬНО       |                                                                                                                                                                                                                         |
| RUNNING                                  |ACTIVITY_STATE| :heavy_check_mark:ОБЯЗАТЕЛЬНО       |                                                                                                                                                                                                                         |
| CANCELLED                                |ACTIVITY_STATE| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ      | У сценария обязательно должно быть одно из событий ACTIVITY_RESULT.POSITIVE_ENDING, ACTIVITY_RESULT.NEUTRAL_ENDING, ACTIVITY_RESULT.NEGATIVE_ENDING или ACTIVITY_ERRORS.FAULT или ACTIVITY_STATE.CANCELLED              |
| DATA_WAITING                             |ACTIVITY_STATE| :ballot_box_with_check:ОПЦИОНАЛЬНО  |                                                                                                                                                                                                                         |
| EVENT_WAITING                            |ACTIVITY_STATE| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ      |                                                                                                                                                                                                                         |
| HOLD                                     |ACTIVITY_STATE| :ballot_box_with_check:ОПЦИОНАЛЬНО  |                                                                                                                                                                                                                         |
| PAUSED                                   |ACTIVITY_STATE| :ballot_box_with_check:ОПЦИОНАЛЬНО  |                                                                                                                                                                                                                         |
| POSITIVE_ENDING                          |ACTIVITY_RESULT| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ      | У сценария обязательно должно быть одно из событий ACTIVITY_RESULT.POSITIVE_ENDING, ACTIVITY_RESULT.NEUTRAL_ENDING, ACTIVITY_RESULT.NEGATIVE_ENDING или ACTIVITY_ERRORS.FAULT или ACTIVITY_STATE.CANCELLED              |
| NEUTRAL_ENDING                           |ACTIVITY_RESULT| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ      | У сценария обязательно должно быть одно из событий ACTIVITY_RESULT.POSITIVE_ENDING, ACTIVITY_RESULT.NEUTRAL_ENDING, ACTIVITY_RESULT.NEGATIVE_ENDING или ACTIVITY_ERRORS.FAULT или ACTIVITY_STATE.CANCELLED              |
| NEGATIVE_ENDING                          |ACTIVITY_RESULT| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ      | У сценария обязательно должно быть одно из событий ACTIVITY_RESULT.POSITIVE_ENDING, ACTIVITY_RESULT.NEUTRAL_ENDING, ACTIVITY_RESULT.NEGATIVE_ENDING или ACTIVITY_ERRORS.FAULT или ACTIVITY_STATE.CANCELLED              |
| FAULT                                    |ACTIVITY_ERRORS| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ      | У сценария обязательно должно быть одно из событий ACTIVITY_RESULT.POSITIVE_ENDING, ACTIVITY_RESULT.NEUTRAL_ENDING, ACTIVITY_RESULT.NEGATIVE_ENDING или ACTIVITY_ERRORS.FAULT или ACTIVITY_STATE.CANCELLED              |
| RUNNING ... HOLD	                        |ACTIVITY_ERRORS| :ballot_box_with_check:ОПЦИОНАЛЬНО  |                                                                                                                                                                                                                         |
| RUNNING ... HOLD body.service.slaState{} |ACTIVITY_STATE_SLA| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ      |                                                                                                                                                                                                                         |
| MALFUNCTION |ACTIVITY_EXECUTE_SCENARIO_FAILED| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ    |                                                                                                                                                                                                                         |


### 3. Дочерний сценарий
Данный сценарий не позволяет подключаться к нему другим дочерним сценариям, но, при этом, участвует в activity-логике других сценариев.

#### Условия
| Поле                         | Значения                            |
|:-----------------------------|:------------------------------------|
| children_scenario_allowed    | **false**                           |
| В триггерах **есть** события | source_activity_type: ACTIVITY_INIT |
|                              | source_scenario_state: INITIATED    |

#### Таблица событий
| Статус сценария                          |Тип activity-события| Обязательность                      | Комментарий                                                                                                                                                                                                             |
|:-----------------------------------------|:----|:------------------------------------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| IS_ROLLING_BACK                          |ACTIVITY_IN_ACTION| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ      |                                                                                                                                                                                                                         |
| HAS_ROLLED_BACK                          |ACTIVITY_STATE| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ      |                                                                                                                                                                                                                         |
| INITIATED                                |ACTIVITY_INIT| :x: НЕ ПУБЛИКУЕТСЯ       |                                                                                                                                                                                                                         |
| ACCEPTED                                 |ACTIVITY_IN_ACTION| :heavy_check_mark:ОБЯЗАТЕЛЬНО                 |                                                                                                                                                                                                                         |
| SKIPPED                                  |ACTIVITY_IN_ACTION| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ                   |                                                                                                                                                                                                                         |
| STARTED                                  |ACTIVITY_IN_ACTION| :heavy_check_mark:ОБЯЗАТЕЛЬНО       |                                                                                                                                                                                                                         |
| RUNNING                                  |ACTIVITY_STATE| :heavy_check_mark:ОБЯЗАТЕЛЬНО       |                                                                                                                                                                                                                         |
| CANCELLED                                |ACTIVITY_STATE| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ      | У сценария обязательно должно быть одно из событий ACTIVITY_RESULT.POSITIVE_ENDING, ACTIVITY_RESULT.NEUTRAL_ENDING, ACTIVITY_RESULT.NEGATIVE_ENDING или ACTIVITY_ERRORS.FAULT или ACTIVITY_STATE.CANCELLED              |
| DATA_WAITING                             |ACTIVITY_STATE| :ballot_box_with_check:ОПЦИОНАЛЬНО  |                                                                                                                                                                                                                         |
| EVENT_WAITING                            |ACTIVITY_STATE| :x: НЕ ПУБЛИКУЕТСЯ      |                                                                                                                                                                                                                         |
| HOLD                                     |ACTIVITY_STATE| :ballot_box_with_check:ОПЦИОНАЛЬНО  |                                                                                                                                                                                                                         |
| PAUSED                                   |ACTIVITY_STATE| :ballot_box_with_check:ОПЦИОНАЛЬНО  |                                                                                                                                                                                                                         |
| POSITIVE_ENDING                          |ACTIVITY_RESULT| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ      | У сценария обязательно должно быть одно из событий ACTIVITY_RESULT.POSITIVE_ENDING, ACTIVITY_RESULT.NEUTRAL_ENDING, ACTIVITY_RESULT.NEGATIVE_ENDING или ACTIVITY_ERRORS.FAULT или ACTIVITY_STATE.CANCELLED              |
| NEUTRAL_ENDING                           |ACTIVITY_RESULT| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ      | У сценария обязательно должно быть одно из событий ACTIVITY_RESULT.POSITIVE_ENDING, ACTIVITY_RESULT.NEUTRAL_ENDING, ACTIVITY_RESULT.NEGATIVE_ENDING или ACTIVITY_ERRORS.FAULT или ACTIVITY_STATE.CANCELLED              |
| NEGATIVE_ENDING                          |ACTIVITY_RESULT| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ      | У сценария обязательно должно быть одно из событий ACTIVITY_RESULT.POSITIVE_ENDING, ACTIVITY_RESULT.NEUTRAL_ENDING, ACTIVITY_RESULT.NEGATIVE_ENDING или ACTIVITY_ERRORS.FAULT или ACTIVITY_STATE.CANCELLED              |
| FAULT                                    |ACTIVITY_ERRORS| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ      | У сценария обязательно должно быть одно из событий ACTIVITY_RESULT.POSITIVE_ENDING, ACTIVITY_RESULT.NEUTRAL_ENDING, ACTIVITY_RESULT.NEGATIVE_ENDING или ACTIVITY_ERRORS.FAULT или ACTIVITY_STATE.CANCELLED              |
| RUNNING ... HOLD	                        |ACTIVITY_ERRORS| :ballot_box_with_check:ОПЦИОНАЛЬНО  |                                                                                                                                                                                                                         |
| RUNNING ... HOLD body.service.slaState{} |ACTIVITY_STATE_SLA| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ      |                                                                                                                                                                                                                         |
| MALFUNCTION |ACTIVITY_EXECUTE_SCENARIO_FAILED| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ    |                                                                                                                                                                                                                         |


### 4. Дочерний и родительский сценарий
Данный сценарий позволяет  как подключаться к нему другим дочерним сценариям, так и участвует в activity-логике других сценариев.

#### Условия
| Поле                         | Значения                            |
|:-----------------------------|:------------------------------------|
| children_scenario_allowed    | **true**                            |
| В триггерах **есть** события | source_activity_type: ACTIVITY_INIT |
|                              | source_scenario_state: INITIATED    |

#### Таблица событий
| Статус сценария                          |Тип activity-события| Обязательность                   | Комментарий                                                                                                                                                                                                             |
|:-----------------------------------------|:----|:---------------------------------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| IS_ROLLING_BACK                          |ACTIVITY_IN_ACTION| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ   |                                                                                                                                                                                                                         |
| HAS_ROLLED_BACK                          |ACTIVITY_STATE| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ   |                                                                                                                                                                                                                         |
| INITIATED                                |ACTIVITY_INIT| :heavy_check_mark:ОБЯЗАТЕЛЬНО    |                                                                                                                                                                                                                         |
| ACCEPTED                                 |ACTIVITY_IN_ACTION| :heavy_check_mark:ОБЯЗАТЕЛЬНО    |                                                                                                                                                                                                                         |
| SKIPPED                                  |ACTIVITY_IN_ACTION| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ   |                                                                                                                                                                                                                         |
| STARTED                                  |ACTIVITY_IN_ACTION| :heavy_check_mark:ОБЯЗАТЕЛЬНО    |                                                                                                                                                                                                                         |
| RUNNING                                  |ACTIVITY_STATE| :heavy_check_mark:ОБЯЗАТЕЛЬНО    |                                                                                                                                                                                                                         |
| CANCELLED                                |ACTIVITY_STATE| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ   | У сценария обязательно должно быть одно из событий ACTIVITY_RESULT.POSITIVE_ENDING, ACTIVITY_RESULT.NEUTRAL_ENDING, ACTIVITY_RESULT.NEGATIVE_ENDING или ACTIVITY_ERRORS.FAULT или ACTIVITY_STATE.CANCELLED              |
| DATA_WAITING                             |ACTIVITY_STATE| :ballot_box_with_check:ОПЦИОНАЛЬНО|                                                                                                                                                                                                                         |
| EVENT_WAITING                            |ACTIVITY_STATE| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ   |                                                                                                                                                                                                                         |
| HOLD                                     |ACTIVITY_STATE| :ballot_box_with_check:ОПЦИОНАЛЬНО|                                                                                                                                                                                                                         |
| PAUSED                                   |ACTIVITY_STATE| :ballot_box_with_check:ОПЦИОНАЛЬНО|                                                                                                                                                                                                                         |
| POSITIVE_ENDING                          |ACTIVITY_RESULT| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ   | У сценария обязательно должно быть одно из событий ACTIVITY_RESULT.POSITIVE_ENDING, ACTIVITY_RESULT.NEUTRAL_ENDING, ACTIVITY_RESULT.NEGATIVE_ENDING или ACTIVITY_ERRORS.FAULT или ACTIVITY_STATE.CANCELLED              |
| NEUTRAL_ENDING                           |ACTIVITY_RESULT| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ   | У сценария обязательно должно быть одно из событий ACTIVITY_RESULT.POSITIVE_ENDING, ACTIVITY_RESULT.NEUTRAL_ENDING, ACTIVITY_RESULT.NEGATIVE_ENDING или ACTIVITY_ERRORS.FAULT или ACTIVITY_STATE.CANCELLED              |
| NEGATIVE_ENDING                          |ACTIVITY_RESULT| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ   | У сценария обязательно должно быть одно из событий ACTIVITY_RESULT.POSITIVE_ENDING, ACTIVITY_RESULT.NEUTRAL_ENDING, ACTIVITY_RESULT.NEGATIVE_ENDING или ACTIVITY_ERRORS.FAULT или ACTIVITY_STATE.CANCELLED              |
| FAULT                                    |ACTIVITY_ERRORS| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ   | У сценария обязательно должно быть одно из событий ACTIVITY_RESULT.POSITIVE_ENDING, ACTIVITY_RESULT.NEUTRAL_ENDING, ACTIVITY_RESULT.NEGATIVE_ENDING или ACTIVITY_ERRORS.FAULT или ACTIVITY_STATE.CANCELLED              |
| RUNNING ... HOLD	                        |ACTIVITY_ERRORS| :ballot_box_with_check:ОПЦИОНАЛЬНО   |                                                                                                                                                                                                                         |
| RUNNING ... HOLD body.service.slaState{} |ACTIVITY_STATE_SLA| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ    |                                                                                                                                                                                                                         |
| MALFUNCTION |ACTIVITY_EXECUTE_SCENARIO_FAILED| :warning:ДОЛЖЕН ПОДДЕРЖИВАТЬСЯ    |                                                                                                                                                                                                                         |